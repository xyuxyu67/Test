local Library = {}
Library.__index = Library

local Players = game:GetService("Players")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui")

-- GUI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "UILibrary"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = PlayerGui

Library.WindowCount = 0
Library.MaxWindows = 5

-- üî• –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –¥—Ä–∞–≥–≥–∏–Ω–≥
local function MakeDraggable(frame)
    local dragging = false
    local dragStart, startPos

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position

            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    UIS.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            frame.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
end

-- ü™ü –°–æ–∑–¥–∞–Ω–∏–µ –æ–∫–Ω–∞
function Library:CreateWindow(opts)
    if self.WindowCount >= self.MaxWindows then
        warn("Max windows reached (5)")
        return
    end

    self.WindowCount += 1

    local name = (opts and opts.Name) or "Window"

    -- –∫–∞–∂–¥–æ–µ —Å–ª–µ–¥—É—é—â–µ–µ –æ–∫–Ω–æ –ø—Ä–∞–≤–µ–µ
    local offsetX = 10 + ((self.WindowCount - 1) * 410)

    local Main = Instance.new("Frame")
    Main.Size = UDim2.new(0, 400, 0, 100) -- ‚úÖ 400x100 –ø–∏–∫—Å–µ–ª–µ–π
    Main.Position = UDim2.new(0, offsetX, 0, 10) -- ‚úÖ —Å–ª–µ–≤–∞ —Å–≤–µ—Ä—Ö—É
    Main.BackgroundColor3 = Color3.fromRGB(45,45,45) -- ‚úÖ —Ç–µ–º–Ω–µ–µ
    Main.BorderSizePixel = 0
    Main.Parent = ScreenGui
    Main.Name = name

    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 6)
    UICorner.Parent = Main

    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫ (–æ–Ω –∂–µ –∑–æ–Ω–∞ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è)
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 26)
    Title.BackgroundTransparency = 1
    Title.Text = name
    Title.Font = Enum.Font.GothamBold
    Title.TextSize = 14
    Title.TextColor3 = Color3.fromRGB(255,255,255)
    Title.Parent = Main

    MakeDraggable(Main) -- –º–æ–∂–Ω–æ —Ç—è–Ω—É—Ç—å –∑–∞ –≤—Å—ë –æ–∫–Ω–æ

    local Window = {}
    Window.Instance = Main

    return Window
end

return Library
